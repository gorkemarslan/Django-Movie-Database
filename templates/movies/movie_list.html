{% extends '_base.html' %}
{% load static %}

{% block statichead %}
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<!-- Font awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Custom CSS and JS -->
<link rel="stylesheet" href="{% static 'movies/css/movies.css' %}">
<script src="{% static 'movies/js/movies.js' %}" defer></script>
{% endblock statichead %}

{% block title %}Movies{% endblock title %}
{% block content %}
    <h1>Movies</h1>
<ul style="list-style: none;">
{% for movie in movie_list %}

    <div class="col text-center">
        <li>
            <div class="row movie" id="{{ movie.movie_id }}">
                 <div class="col-3">
                    {{ movie.title }} - ({{ movie.year }})
                </div>
                <div class="col-5 rating">
                    <form class="rate-form" action="" method="POST">
                        {% csrf_token %}
                        {% if movie.user_rating.first.user_rating >= 1 %}
                            <span class="fa fa-star fa-2x checked star-btn"></span>
                        {% else %}
                            <span class="fa fa-star fa-2x star-btn"></span>
                        {% endif %}

                        {% if movie.user_rating.first.user_rating >= 2 %}
                            <span class="fa fa-star fa-2x checked star-btn"></span>
                        {% else %}
                            <span class="fa fa-star fa-2x star-btn"></span>
                        {% endif %}

                        {% if movie.user_rating.first.user_rating >= 3 %}
                            <span type="submit" class="fa fa-star fa-2x checked star-btn"></span>
                        {% else %}
                            <span type="submit" class="fa fa-star fa-2x star-btn"></span>
                        {% endif %}

                        {% if movie.user_rating.first.user_rating >= 4 %}
                            <span class="fa fa-star fa-2x checked star-btn"></span>
                        {% else %}
                            <span class="fa fa-star fa-2x star-btn"></span>
                        {% endif %}

                        {% if movie.user_rating.first.user_rating >= 5 %}
                            <span class="fa fa-star fa-2x checked star-btn"></span>
                        {% else %}
                            <span class="fa fa-star fa-2x star-btn"></span>
                        {% endif %}
                    </form>
                </div>
                {{ movie.user_rating.first.user_rating }}
            </div>


        </li>
    </div>
{% empty %}
    <li>No movie yet.</li>
{% endfor %}

</ul>

{% include "movies/pagination.html" %}

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock content %}
